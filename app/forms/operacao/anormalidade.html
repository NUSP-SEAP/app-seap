<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro de Anormalidade na Operação de Áudio</title>
  <meta name="robots" content="noindex,nofollow" />
  <link rel="stylesheet" href="/css/app/forms/operacao/anormalidade.css">
</head>

<body>
  <main>
    <div class="card">
      <h1>Registro de Anormalidade na Operação de Áudio</h1>
      <p class="muted">Preencha as informações referentes à anormalidade. Campos marcados com * são obrigatórios.</p>
      <p class="muted" id="registro-ref" style="margin-top:-6px;"></p>

      <form id="form-raoa" novalidate>
        <!-- IDs e referências -->
        <input type="hidden" id="registro_id" name="registro_id" />

        <!-- 1) Referência ao Registro de Operação -->
        <div class="section-title">1) Referência ao Registro de Operação</div>
        <div class="grid grid-3">
          <div>
            <div>
              <label class="required" for="data">Data</label>
              <input type="date" id="data" name="data" required />
            </div>
          </div>
          <div>
            <label class="required" for="sala_id">Local do Evento</label>
            <select id="sala_id" name="sala_id" required disabled>
              <option value="">Carregando...</option>
            </select>
          </div>
          <div>
            <label class="required" for="nome_evento">Nome do Evento</label>
            <input type="text" id="nome_evento" name="nome_evento" required />
          </div>
        </div>

        <!-- 2) Detalhes da Anormalidade -->
        <div class="section-title">2) Detalhes da Anormalidade</div>
        <div class="grid grid-3">
          <div>
            <label class="required" for="hora_inicio_anormalidade">Horário de início da anormalidade</label>
            <input type="time" id="hora_inicio_anormalidade" name="hora_inicio_anormalidade" required />
          </div>
          <div>
            <label for="data_solucao">Data da solução da anormalidade</label>
            <input type="date" id="data_solucao" name="data_solucao" />
          </div>
          <div>
            <label for="hora_solucao">Hora da solução da anormalidade</label>
            <input type="time" id="hora_solucao" name="hora_solucao" />
          </div>
        </div>
        <div>
          <label class="required" for="descricao_anormalidade">Descrição da anormalidade</label>
          <textarea id="descricao_anormalidade" name="descricao_anormalidade" required></textarea>
        </div>

        <!-- 3) Impactos e Reclamações (mantido) -->
        <div class="section-title">3) Impactos e Reclamações</div>
        <div class="grid grid-2">
          <div>
            <label class="required">Houve prejuízo ao andamento?</label>
            <div class="field-inline">
              <label><input type="radio" name="houve_prejuizo" value="nao" checked /> Não</label>
              <label><input type="radio" name="houve_prejuizo" value="sim" /> Sim</label>
            </div>
          </div>
          <div id="grp_descricao_prejuizo" class="hidden">
            <label for="descricao_prejuizo">Descrição do prejuízo (opcional)</label>
            <textarea id="descricao_prejuizo" name="descricao_prejuizo"
              placeholder="Se houve, descreva brevemente o prejuízo."></textarea>
          </div>
        </div>

        <div class="grid grid-2">
          <div>
            <label class="required">Houve reclamação?</label>
            <div class="field-inline">
              <label><input type="radio" name="houve_reclamacao" value="nao" checked /> Não</label>
              <label><input type="radio" name="houve_reclamacao" value="sim" /> Sim</label>
            </div>
          </div>
          <div id="grp_autores_conteudo_reclamacao" class="hidden">
            <label for="autores_conteudo_reclamacao">Autor(es) e conteúdo resumido da(s) reclamação(ões)
              (opcional)</label>
            <textarea id="autores_conteudo_reclamacao" name="autores_conteudo_reclamacao"></textarea>
          </div>
        </div>

        <!-- 4) Manutenção (mantido) -->
        <div class="section-title">4) Manutenção</div>

        <div class="grid grid-2">
          <div>
            <label class="required">Foi necessário acionar manutenção?</label>
            <div class="field-inline">
              <label><input type="radio" name="acionou_manutencao" value="nao" checked /> Não</label>
              <label><input type="radio" name="acionou_manutencao" value="sim" /> Sim</label>
            </div>
          </div>
          <div id="grp_hora_acionamento" class="hidden">
            <label for="hora_acionamento_manutencao">Hora do acionamento da manutenção (opcional)</label>
            <input type="time" id="hora_acionamento_manutencao" name="hora_acionamento_manutencao" />
          </div>
        </div>

        <div class="grid grid-2">
          <div>
            <label class="required">Anormalidade resolvida pelo próprio operador?</label>
            <div class="field-inline">
              <label><input type="radio" name="resolvida_pelo_operador" value="nao" checked /> Não</label>
              <label><input type="radio" name="resolvida_pelo_operador" value="sim" /> Sim</label>
            </div>
          </div>
          <div id="grp_procedimentos_adotados" class="hidden">
            <label for="procedimentos_adotados">Descrição sucinta dos procedimentos adotados (opcional)</label>
            <textarea id="procedimentos_adotados" name="procedimentos_adotados"></textarea>
          </div>
        </div>

        <!-- 5) Responsáveis (sem "Operador responsável pelo registro") -->
        <div class="section-title">5) Responsáveis</div>
        <div class="grid grid-2">
          <div>
            <label class="required" for="responsavel_evento">Responsável do evento (Comissão/Mesa/Organização)</label>
            <input type="text" id="responsavel_evento" name="responsavel_evento" required
              placeholder="Nome do responsável" />
          </div>
        </div>

        <!-- Ações -->
        <div class="actions">
          <button type="button" class="btn-secondary" id="btn-voltar">Voltar</button>
          <button type="submit" class="btn-primary">Salvar registro</button>
        </div>
      </form>
    </div>
  </main>

  <!-- Proteção/Session drop‑in (mesmo padrão das demais páginas) -->
  <script src="/js/session-autoload.js" defer></script>
  <script src="/js/app/forms/operacao/anormalidade.js" defer></script>
</body>

</html>